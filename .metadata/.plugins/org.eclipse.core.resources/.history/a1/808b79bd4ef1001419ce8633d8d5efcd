import java.awt.Color;
import java.awt.Component;
import java.awt.Graphics;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.IOException;
import java.util.ArrayList;

import javax.swing.*;


public class MeatBoyLevel extends JPanel implements ActionListener{
	private Timer time;
	private MeatBoy player;
	private int width= 1000;
	private int height= 1000;
	private ArrayList<Platform> platformList;
	private int xscroll;
	private int yscroll;
	public MeatBoyLevel(Component c)   {
		platformList = new ArrayList<Platform>();
		xscroll=0;
		yscroll=0;
		width=1000;
		height=1000;
		
		for(int i=0;i<4;i++){
			Platform test = new Platform(170,350-i*50,50,50);
			test.setColor(Color.GREEN);
			platformList.add(test);
		}
		
		for (int i2 = 0; i2<25; i2++){
			Platform plat= new Platform(350+i2*50,i2*25+280,50,50);
			plat.setColor(new Color((int)(Math.random()*255),(int)(Math.random()*255),(int)(Math.random()*255)));
			platformList.add(plat);
		}
		
		Platform test = new Platform(130,450,50,50);
		test.setColor(Color.red);
		platformList.add(test);
		Platform ground = new Platform(50,500,900,50);
		ground.setColor(Color.red);
		
		platformList.add(ground);
		player = new MeatBoy(c,this);	
		
		time=new Timer(40,this);
		time.start();
		
	}
	public void update(){
		player.move();
		xscroll=player.getX();
		yscroll=player.getY();
		for(int i=0;i<platformList.size();i++){
			platformList.get(i).setScroll(xscroll,yscroll);
			platformList.get(i).updateHitbox();
		}
	}
	public void paintComponent(Graphics g){
		super.paintComponent(g);
		player.draw(g);	
		for(Platform p:platformList){
			p.draw(g);
		}
	}
	public ArrayList<Platform> getPlatforms(){
		return platformList;
	}
	public void actionPerformed(ActionEvent e){
		update();
		repaint();
	}
	public int getWidth(){
		return width;
	}
	public int getHeight(){
		return height;
	}
		
}
