package level;

import java.io.File;
import java.io.IOException;
import java.util.ArrayList;

import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.parsers.ParserConfigurationException;
import javax.xml.xpath.XPath;
import javax.xml.xpath.XPathExpressionException;
import javax.xml.xpath.XPathFactory;

import org.w3c.dom.Document;
import org.xml.sax.SAXException;

import tile.Tile;
import tile.TileSet;

public class TileMap {
	private TileSet ts;
	private ArrayList<Tile> alltiles;
	private Tile[][] background;
	private Tile[][] stationary;
	private Tile[][] foreground;
	Private File tmx;
	public TileMap(){
		ts = new TileSet(20,20,"map1.tmx");
		alltiles=ts.getTiles();
		background = new Tile[100][100];
		stationary = new Tile[100][100];
		foreground = new Tile[100][100];
		loadMap();
	}
	public void loadMap(String tmxfile) throws XPathExpressionException, SAXException, ParserConfigurationException, IOException{
		DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
		DocumentBuilder builder = factory.newDocumentBuilder();
		XPathFactory xpfactory = XPathFactory.newInstance();
      	XPath path = xpfactory.newXPath();
		File f = new File("resources/"+tmxfile);
		Document doc = builder.parse(f);
		int numLayers = Integer.parseInt(path.evaluate("count(/map/layer)", doc));
		for(int i=1;i<=numLayers;i++){
			int numTilesWidth=Integer.parseInt(path.evaluate("/map/layer["+i+"]/@width", doc));
			int numTilesHeight=Integer.parseInt(path.evaluate("/map/layer["+i+"]/@height", doc));
			
		}
	}
}
